<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Acribus | API</title>
    <meta name="description" content="快速生成中后台项目">
    <link rel="icon" href="/acribus/logo.png">
  <link rel="manifest" href="/acribus/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/acribus/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/acribus/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">

    <link rel="preload" href="/acribus/assets/css/styles.38103787.css" as="style"><link rel="preload" href="/acribus/assets/js/app.38103787.js" as="script"><link rel="preload" href="/acribus/assets/css/styles.38103787.css" as="style"><link rel="preload" href="/acribus/assets/js/12.08257d0a.js" as="script"><link rel="prefetch" href="/acribus/assets/js/1.115ff864.js"><link rel="prefetch" href="/acribus/assets/js/10.e392713b.js"><link rel="prefetch" href="/acribus/assets/js/11.56b51e4c.js"><link rel="prefetch" href="/acribus/assets/js/13.4dc794e5.js"><link rel="prefetch" href="/acribus/assets/js/14.faef358a.js"><link rel="prefetch" href="/acribus/assets/js/15.05e4bee1.js"><link rel="prefetch" href="/acribus/assets/js/16.97d09055.js"><link rel="prefetch" href="/acribus/assets/js/17.1eb1e088.js"><link rel="prefetch" href="/acribus/assets/js/18.84d26e49.js"><link rel="prefetch" href="/acribus/assets/js/19.19ab024a.js"><link rel="prefetch" href="/acribus/assets/js/2.adbb556e.js"><link rel="prefetch" href="/acribus/assets/js/20.a33a6b1e.js"><link rel="prefetch" href="/acribus/assets/js/21.5f34f48a.js"><link rel="prefetch" href="/acribus/assets/js/3.99a4e9ef.js"><link rel="prefetch" href="/acribus/assets/js/4.a7bee59a.js"><link rel="prefetch" href="/acribus/assets/js/5.d3999c7e.js"><link rel="prefetch" href="/acribus/assets/js/6.615b0f7f.js"><link rel="prefetch" href="/acribus/assets/js/7.376125de.js"><link rel="prefetch" href="/acribus/assets/js/8.04a6bf66.js"><link rel="prefetch" href="/acribus/assets/js/9.5ec813d5.js">
    <link rel="stylesheet" href="/acribus/assets/css/styles.38103787.css"><link rel="stylesheet" href="/acribus/assets/css/styles.38103787.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/acribus/zh/" class="home-link router-link-active"><!----><span class="site-name">
      Acribus
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/acribus/zh/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/acribus/zh/api/" class="nav-link router-link-exact-active router-link-active">API</a></div><div class="nav-item"><a href="/acribus/zh/ecosystem/" class="nav-link">周边</a></div><div class="nav-item"><a href="/acribus/zh/theme/" class="nav-link">主题</a></div><div class="nav-item"><a href="/acribus/zh/changeLog/" class="nav-link">CHANGELOG</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/acribus/" class="nav-link">en-US</a></li><li class="dropdown-item"><!----><a href="/acribus/zh/api/" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div><a href="https://github.com/acribus/acribus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/acribus/zh/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/acribus/zh/api/" class="nav-link router-link-exact-active router-link-active">API</a></div><div class="nav-item"><a href="/acribus/zh/ecosystem/" class="nav-link">周边</a></div><div class="nav-item"><a href="/acribus/zh/theme/" class="nav-link">主题</a></div><div class="nav-item"><a href="/acribus/zh/changeLog/" class="nav-link">CHANGELOG</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/acribus/" class="nav-link">en-US</a></li><li class="dropdown-item"><!----><a href="/acribus/zh/api/" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div><a href="https://github.com/acribus/acribus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>API</span><!----></p><ul class="sidebar-group-items"><li><a href="/acribus/zh/api/#global-config" class="sidebar-link">Global Config</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acribus/zh/api/#config-request" class="sidebar-link">config/request</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#config-locale" class="sidebar-link">config/locale</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#config-i18n" class="sidebar-link">config/i18n</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#config-respdataextractor" class="sidebar-link">config/respDataExtractor</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#config-urlstyle" class="sidebar-link">config/urlStyle</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#config-types" class="sidebar-link">config/types</a></li></ul></li><li><a href="/acribus/zh/api/#global-api" class="sidebar-link">Global API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acribus/zh/api/#resource-name-resourcedeclareobject-triggersearchafterresourcechange" class="sidebar-link">resource(name, resourceDeclareObject, triggerSearchAfterResourceChange)</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#register-viewdeclareobject-viewdeclareobject" class="sidebar-link">register(viewDeclareObject | viewDeclareObject[])</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#registermodule-name-module-api-isautolist" class="sidebar-link">registerModule(name, module, api, isAutoList)</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#bootstrap-callback" class="sidebar-link">bootstrap(callback)</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#schema" class="sidebar-link">schema</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#constant" class="sidebar-link">constant</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#context" class="sidebar-link">context</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#safeget" class="sidebar-link">safeGet</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#standardizeresource" class="sidebar-link">standardizeResource</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#updateallcomponents" class="sidebar-link">updateAllComponents</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#mergehelper" class="sidebar-link">mergeHelper</a></li></ul></li><li><a href="/acribus/zh/api/#resourcedeclareobject" class="sidebar-link">resourceDeclareObject</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acribus/zh/api/#resourcedeclareobject-schema-item" class="sidebar-link">resourceDeclareObject/schema[]/item</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#resourcedeclareobject-url" class="sidebar-link">resourceDeclareObject/url</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#resourcedeclareobject-triggersearchafterresourcechange" class="sidebar-link">resourceDeclareObject/triggerSearchAfterResourceChange</a></li></ul></li><li><a href="/acribus/zh/api/#viewdeclareobject" class="sidebar-link">viewDeclareObject</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acribus/zh/api/#viewdeclareobject-actions-item" class="sidebar-link">viewDeclareObject/actions[]/item</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#viewdeclareobject-customhooks" class="sidebar-link">viewDeclareObject/customHooks</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#viewdeclareobject-options" class="sidebar-link">viewDeclareObject/options</a></li></ul></li><li><a href="/acribus/zh/api/#store" class="sidebar-link">Store</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acribus/zh/api/#store-columneditmodal" class="sidebar-link">Store/columnEditModal</a></li></ul></li><li><a href="/acribus/zh/api/#route" class="sidebar-link">Route</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/acribus/zh/api/#built-in-components" class="sidebar-link">Built-In Components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acribus/zh/api/#aqueryform" class="sidebar-link">aQueryForm</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#acustomhooks" class="sidebar-link">aCustomHooks</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#acreateform" class="sidebar-link">aCreateForm</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#atable" class="sidebar-link">aTable</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#amenu" class="sidebar-link">aMenu</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#abreadcrumb" class="sidebar-link">aBreadcrumb</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#atabs" class="sidebar-link">ATabs</a></li><li class="sidebar-sub-header"><a href="/acribus/zh/api/#aheader" class="sidebar-link">aHeader</a></li></ul></li><li><a href="/acribus/zh/api/#refs" class="sidebar-link">Refs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/acribus/zh/api/#options" class="sidebar-link">options</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="api"><a href="#api" aria-hidden="true" class="header-anchor">#</a> API</h1><p></p><div class="table-of-contents"><ul><li><a href="#api">API</a><ul><li><a href="#global-config">Global Config</a><ul><li><a href="#config-request">config/request</a></li><li><a href="#config-locale">config/locale</a></li><li><a href="#config-i18n">config/i18n</a></li><li><a href="#config-respdataextractor">config/respDataExtractor</a></li><li><a href="#config-urlstyle">config/urlStyle</a></li><li><a href="#config-types">config/types</a></li></ul></li><li><a href="#global-api">Global API</a><ul><li><a href="#resource-name-resourcedeclareobject-triggersearchafterresourcechange">resource(name, resourceDeclareObject, triggerSearchAfterResourceChange)</a></li><li><a href="#register-viewdeclareobject-viewdeclareobject">register(viewDeclareObject | viewDeclareObject[])</a></li><li><a href="#registermodule-name-module-api-isautolist">registerModule(name, module, api, isAutoList)</a></li><li><a href="#bootstrap-callback">bootstrap(callback)</a></li><li><a href="#schema">schema</a><ul><li><a href="#schema-input">schema/Input</a><ul><li><a href="#schema-input-rules">schema/Input/rules</a></li><li><a href="#schema-input-options">schema/Input/options</a><ul><li><a href="#schema-input-options-editable">schema/Input/options/editable</a></li><li><a href="#schema-input-options-indexed">schema/Input/options/indexed</a></li><li><a href="#schema-input-options-formcontrol">schema/Input/options/formControl</a></li><li><a href="#schema-input-options-render-h-value-row-props">schema/Input/options/render([h], value, row, props)</a></li><li><a href="#schema-input-options-group">schema/Input/options/group</a></li><li><a href="#schema-input-options-deps">schema/Input/options/deps</a></li></ul></li></ul></li><li><a href="#schema-select">schema/Select</a></li><li><a href="#schema-plaintext">schema/PlainText</a></li><li><a href="#schema-custom">schema/Custom</a></li></ul></li><li><a href="#constant">constant</a></li><li><a href="#context">context</a><ul><li><a href="#context-travel">context.travel</a></li><li><a href="#context-append">context.append</a></li><li><a href="#context-rmappend">context.rmAppend</a></li></ul></li><li><a href="#safeget">safeGet</a></li><li><a href="#standardizeresource">standardizeResource</a></li><li><a href="#updateallcomponents">updateAllComponents</a></li><li><a href="#mergehelper">mergeHelper</a><ul><li><a href="#deepassign">deepAssign</a></li><li><a href="#mergeschema">mergeSchema</a></li><li><a href="#mergeschemaoptionsbykey">mergeSchemaOptionsByKey</a></li><li><a href="#mergeviewactionbylabel">mergeViewActionByLabel</a></li><li><a href="#mergeviewcustomhookbylabel">mergeViewCustomhookByLabel</a></li></ul></li></ul></li><li><a href="#resourcedeclareobject">resourceDeclareObject</a><ul><li><a href="#resourcedeclareobject-schema-item">resourceDeclareObject/schema[]/item</a></li><li><a href="#resourcedeclareobject-url">resourceDeclareObject/url</a></li><li><a href="#resourcedeclareobject-triggersearchafterresourcechange">resourceDeclareObject/triggerSearchAfterResourceChange</a></li></ul></li><li><a href="#viewdeclareobject">viewDeclareObject</a><ul><li><a href="#viewdeclareobject-actions-item">viewDeclareObject/actions[]/item</a></li><li><a href="#viewdeclareobject-customhooks">viewDeclareObject/customHooks</a></li><li><a href="#viewdeclareobject-options">viewDeclareObject/options</a><ul><li><a href="#viewdeclareobject-options-interceptors">viewDeclareObject/options/interceptors</a></li><li><a href="#viewdeclareobject-options-subscribe">viewDeclareObject/options/subscribe</a></li><li><a href="#viewdeclareobject-options-interceptors-beforeenter-to-from-next">viewDeclareObject/options/interceptors/beforeEnter(to, from, next)</a></li><li><a href="#viewdeclareobject-options-interceptors-one-params">viewDeclareObject/options/interceptors/one(params)</a></li><li><a href="#viewdeclareobject-options-slots">viewDeclareObject/options/slots</a></li><li><a href="#viewdeclareobject-options-selection">viewDeclareObject/options/selection</a></li><li><a href="#viewdeclareobject-options-expand">viewDeclareObject/options/expand</a></li><li><a href="#viewdeclareobject-options-table">viewDeclareObject/options/table</a></li></ul></li></ul></li><li><a href="#store">Store</a><ul><li><a href="#store-columneditmodal">Store/columnEditModal</a></li></ul></li><li><a href="#route">Route</a></li><li><a href="#built-in-components">Built-In Components</a><ul><li><a href="#aqueryform">aQueryForm</a></li><li><a href="#acustomhooks">aCustomHooks</a></li><li><a href="#acreateform">aCreateForm</a></li><li><a href="#atable">aTable</a></li><li><a href="#amenu">aMenu</a></li><li><a href="#abreadcrumb">aBreadcrumb</a></li><li><a href="#atabs">ATabs</a></li><li><a href="#aheader">aHeader</a></li></ul></li><li><a href="#refs">Refs</a><ul><li><a href="#options">options</a></li></ul></li></ul></li></ul></div><p></p><h2 id="global-config"><a href="#global-config" aria-hidden="true" class="header-anchor">#</a> Global Config</h2><p>在 Vue use acribus时，接受一个 config。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> acribus <span class="token keyword">from</span> <span class="token string">'acribus'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>acribus<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  request
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>配置项</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>request</td><td><code>Function</code></td><td>undefined</td><td>true</td><td>Acribus 内用于发请求的函数</td></tr><tr><td>locale</td><td><code>Object</code></td><td>null</td><td>false</td><td>翻译所需的内容</td></tr><tr><td>i18n</td><td><code>Function</code></td><td>内置i18n 函数</td><td>false</td><td>用于替换内部的翻译函数</td></tr><tr><td>respDataExtractor</td><td><code>Function</code></td><td>内置respDataExtractor 函数</td><td>false</td><td>用于提取返回数据中的需要使用的对象</td></tr><tr><td>urlStyle</td><td><code>String|Object</code></td><td>actionInUrl</td><td>false</td><td>用于指示使用那种 url 规范</td></tr><tr><td>types</td><td><code>Object</code></td><td>内置映射，使用 element-ui</td><td>false</td><td>用于自定义每个 schema 类型到 具体组件的映射</td></tr></tbody></table><h3 id="config-request"><a href="#config-request" aria-hidden="true" class="header-anchor">#</a> config/request</h3><ul><li>Usage:</li></ul><p>如果使用 <code>axios</code></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">const</span> request <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  withCredentials<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="config-locale"><a href="#config-locale" aria-hidden="true" class="header-anchor">#</a> config/locale</h3><p>locale 对象是类是下面结构的对象：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> locales <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'en'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'English'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'zh-CN'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'简体中文'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'zh-TW'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'繁體中文'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="config-i18n"><a href="#config-i18n" aria-hidden="true" class="header-anchor">#</a> config/i18n</h3><p>如果想使用第三方 i18n 库，可以通过通过该配置项替换内置 i18n。</p><h3 id="config-respdataextractor"><a href="#config-respdataextractor" aria-hidden="true" class="header-anchor">#</a> config/respDataExtractor</h3><ul><li>Arguments
<ul><li><code>(Object) resp</code></li><li><code>(String) type</code>: list/one/add/edit/delete</li></ul></li><li>Usage</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// resp：请求返回结果</span>
<span class="token comment">// type: 请求类型 list/one/add/edit/delete</span>
<span class="token function">respDataExtractor</span><span class="token punctuation">(</span>resp<span class="token punctuation">:</span> Object<span class="token punctuation">,</span> type<span class="token punctuation">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>默认的 respDataExtractor:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">defaultRespDataExtractor</span><span class="token punctuation">(</span>resp<span class="token punctuation">,</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> resp <span class="token operator">&amp;&amp;</span> resp<span class="token punctuation">.</span>data
<span class="token punctuation">}</span>
</code></pre></div><h3 id="config-urlstyle"><a href="#config-urlstyle" aria-hidden="true" class="header-anchor">#</a> config/urlStyle</h3><p>当值为 <code>String</code> 时：</p><ul><li>restful : restful 风格的接口</li><li>actionInUrl : <a href="" target="_blank" rel="noopener noreferrer">遵循如下规范的接口<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>当值为 <code>Object</code> 时，支持两种形式：</p><ul><li>提供 list/one/add/edit/delete 对应的 url</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  list<span class="token punctuation">:</span> <span class="token string">'/api/list'</span><span class="token punctuation">,</span>
  one<span class="token punctuation">:</span> <span class="token string">'/api/one'</span><span class="token punctuation">,</span>
  add<span class="token punctuation">:</span> <span class="token string">'/api/add'</span><span class="token punctuation">,</span>
  edit<span class="token punctuation">:</span> <span class="token string">'/api/edit'</span><span class="token punctuation">,</span>
  <span class="token keyword">delete</span><span class="token punctuation">:</span> <span class="token string">'/api/delete'</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>提供 list/one/add/edit/delete 对应的请求函数，每个请求函数返回 Promise</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token function">list</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">one</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">add</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">edit</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">delete</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="config-types"><a href="#config-types" aria-hidden="true" class="header-anchor">#</a> config/types</h3><p>默认的映射规则为：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">'input'</span><span class="token punctuation">:</span> <span class="token string">'el-input'</span><span class="token punctuation">,</span>
  <span class="token string">'input-number'</span><span class="token punctuation">:</span> <span class="token string">'el-input-number'</span><span class="token punctuation">,</span>
  <span class="token string">'date-picker'</span><span class="token punctuation">:</span> <span class="token string">'el-date-picker'</span><span class="token punctuation">,</span>
  <span class="token string">'time-picker'</span><span class="token punctuation">:</span> <span class="token string">'el-time-picker'</span><span class="token punctuation">,</span>
  <span class="token string">'select'</span><span class="token punctuation">:</span> ASelect<span class="token punctuation">,</span>
  <span class="token string">'radio'</span><span class="token punctuation">:</span> <span class="token string">'el-radio'</span><span class="token punctuation">,</span>
  <span class="token string">'checkbox'</span><span class="token punctuation">:</span> <span class="token string">'el-checkbox'</span><span class="token punctuation">,</span>
  <span class="token string">'cascader'</span><span class="token punctuation">:</span> <span class="token string">'el-cascader'</span><span class="token punctuation">,</span>
  <span class="token string">'switch'</span><span class="token punctuation">:</span> <span class="token string">'el-switch'</span><span class="token punctuation">,</span>
  <span class="token string">'slider'</span><span class="token punctuation">:</span> <span class="token string">'el-slider'</span><span class="token punctuation">,</span>
  <span class="token string">'upload'</span><span class="token punctuation">:</span> AUplaodFile<span class="token punctuation">,</span>
  <span class="token string">'rate'</span><span class="token punctuation">:</span> <span class="token string">'el-rate'</span><span class="token punctuation">,</span>
  <span class="token string">'color-picker'</span><span class="token punctuation">:</span> <span class="token string">'el-color-picker'</span><span class="token punctuation">,</span>
  <span class="token string">'transfer'</span><span class="token punctuation">:</span> <span class="token string">'el-transfer'</span><span class="token punctuation">,</span>
  <span class="token string">'plain-text'</span><span class="token punctuation">:</span> <span class="token string">'span'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>提供类似上面对象来覆盖默认值。</p><h2 id="global-api"><a href="#global-api" aria-hidden="true" class="header-anchor">#</a> Global API</h2><h3 id="resource-name-resourcedeclareobject-triggersearchafterresourcechange"><a href="#resource-name-resourcedeclareobject-triggersearchafterresourcechange" aria-hidden="true" class="header-anchor">#</a> resource(name, resourceDeclareObject, triggerSearchAfterResourceChange)</h3><table><thead><tr><th>param</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>name</td><td><code>String</code></td><td>undefined</td><td>true</td><td>资源名</td></tr><tr><td>resourceDeclareObject</td><td><code>Object</code></td><td>undefined</td><td>true</td><td>资源声明对象</td></tr><tr><td>triggerSearchAfterResourceChange</td><td><code>Boolean</code></td><td>true</td><td>false</td><td>是否允许在资源update/del/add 成功后执行 search</td></tr></tbody></table><ul><li><p>Usage:</p><p>用于声明一个资源，通过 resource 注册的方式，在资源update/del/add 成功后都会默认执行 list，这个大多数情况下都是想要的行为，比如在弹窗里添加了一条数据，很自然想要更新列表。但如果这不是想要禁掉这种行为，传入第三个参数：false，来显式禁掉。</p><div class="language-js extra-class"><pre class="language-js"><code>acribus<span class="token punctuation">.</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">,</span> resourcePerson<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>See alse: <a href="#resourcedeclareobject">resourceDeclareObject</a></p></li></ul><h3 id="register-viewdeclareobject-viewdeclareobject"><a href="#register-viewdeclareobject-viewdeclareobject" aria-hidden="true" class="header-anchor">#</a> register(viewDeclareObject | viewDeclareObject[])</h3><table><thead><tr><th>param</th><th>type</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>viewDeclareObject</td><td>viewDeclareObject[]</td><td><code>Object</code></td><td><code>Array</code></td></tr></tbody></table><ul><li><p>Usage:</p><p>用于声明一个视图</p></li></ul><div class="language-js extra-class"><pre class="language-js"><code>acribus<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span>
<span class="token comment">// or</span>
acribus<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">[</span>view<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>See alse: <a href="#viewdeclareobject">viewDeclareObject</a></li></ul><h3 id="registermodule-name-module-api-isautolist"><a href="#registermodule-name-module-api-isautolist" aria-hidden="true" class="header-anchor">#</a> registerModule(name, module, api, isAutoList)</h3><table><thead><tr><th>param</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>name</td><td><code>String</code></td><td>undefined</td><td>true</td><td>注册 Vuex 时的 module 名</td></tr><tr><td>module</td><td><code>Object</code></td><td>null</td><td>false</td><td>Vuex store.registerModule 需要接收的对象，一般包含 state/mutations/actions</td></tr><tr><td>api</td><td><code>String|Object</code></td><td>undefined</td><td>false</td><td>和 <a href="#resourcedeclareobject-url">resourceDeclareObject/url</a> 的用法一样</td></tr><tr><td>isAutoList</td><td><code>Boolean</code></td><td>true</td><td>false</td><td>是否允许在资源update/del/add 成功后执行 list</td></tr></tbody></table><ul><li><p>Usage:</p><p><code>registerModule</code> 是更低一级的 API，一般做为注册 Vuex module 的简便写法。<code>resource</code> 内部即是使用的该方法。</p><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">registerModule</span><span class="token punctuation">(</span><span class="token string">'imgOfSku'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'/api/skuImg/'</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>重复注册时，只有第一个生效，后面忽略。</p></div><h3 id="bootstrap-callback"><a href="#bootstrap-callback" aria-hidden="true" class="header-anchor">#</a> bootstrap(callback)</h3><p>resource/register/register 必须放在 callback 中调用，以便在恰当时机执行。</p><ul><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code>acribus<span class="token punctuation">.</span><span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  acribus<span class="token punctuation">.</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">,</span> resourcePerson<span class="token punctuation">)</span>
  acribus<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h3 id="schema"><a href="#schema" aria-hidden="true" class="header-anchor">#</a> schema</h3><p>所有 schema 构造函数在这个对象里，
用于辅助生成 <a href="#resourcedeclareobject">resourceDeclareObject</a>。不同的 schema 构造函数绝对使用何种表单来编辑。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Datetime<span class="token punctuation">,</span>
  Textarea<span class="token punctuation">,</span>
  Number<span class="token punctuation">,</span>
  Select<span class="token punctuation">,</span>
  MultiSelect<span class="token punctuation">,</span>
  Input<span class="token punctuation">,</span>
  DatetimeRange<span class="token punctuation">,</span>
  Tree<span class="token punctuation">,</span>
  CheckTree<span class="token punctuation">,</span>
  Upload<span class="token punctuation">,</span>
  PlainText<span class="token punctuation">,</span>
  Custom
<span class="token punctuation">}</span>
</code></pre></div><h4 id="schema-input"><a href="#schema-input" aria-hidden="true" class="header-anchor">#</a> schema/Input</h4><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Input</span><span class="token punctuation">(</span>lable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> rules<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>param</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>lable</td><td><code>String</code></td><td>undefined</td><td>true</td><td>schema 的 label，用于展示</td></tr><tr><td>key</td><td><code>String</code></td><td>undefined</td><td>true</td><td>schema 的 key，用于储存</td></tr><tr><td>rules</td><td><code>Boolean|String|Object|Array</code></td><td>null</td><td>false</td><td>编辑和创建表单的验证规则</td></tr><tr><td>options</td><td><code>Object</code></td><td>null</td><td>false</td><td>额外的配置项</td></tr></tbody></table><p>Datetime, Textarea, Number, Select, DatetimeRange, Tree, CheckTree, Upload 和 Input 用法一样。</p><h5 id="schema-input-rules"><a href="#schema-input-rules" aria-hidden="true" class="header-anchor">#</a> schema/Input/rules</h5><ul><li><p>当值为 Boolean 时，会被用于设置 required，最终会展开为:</p><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should not be empty !`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div></li><li><p>当值为 String 时，必须为下列值之一：required/number/email，最最终会展开为下面之一</p><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// required</span>
  <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should not be empty !`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token comment">// number</span>
  <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token string">'number'</span><span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should be a number !`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token comment">// email</span>
  <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
    message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> should be an email address !`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div></li><li><p>当值为 Object 时，展开为下面的对象：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>rules<span class="token punctuation">]</span>
</code></pre></div></li><li><p>当值为 Array 时，Array 的元素可以为 字符串，但必须为 required/number/email，也可以为对象。</p></li></ul><h5 id="schema-input-options"><a href="#schema-input-options" aria-hidden="true" class="header-anchor">#</a> schema/Input/options</h5><p>可以接收的配置项：</p><table><thead><tr><th>配置项</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>inTable</td><td><code>Boolean|Function</code></td><td>true</td><td>false</td><td>是否显示在 table 中</td></tr><tr><td>editable</td><td><code>Boolean|Function</code></td><td>true</td><td>false</td><td>是否可编辑</td></tr><tr><td>asFilter</td><td><code>Boolean|Function</code></td><td>false</td><td>false</td><td>是否作为查询条件</td></tr><tr><td>asTabFilter</td><td><code>Boolean|Function</code></td><td>false</td><td>false</td><td>是否作为查询条件并且展示为 tabs</td></tr><tr><td>indexed</td><td><code>Boolean</code></td><td>false</td><td>false(key 为 id 时，默认值为 true)</td><td>是否为索引字段，作为资源查看和删除接口附带的参数</td></tr><tr><td>defaultValue</td><td><code>Function| value</code></td><td>undefined</td><td>false</td><td>置默认值</td></tr><tr><td>tableColumn</td><td><code>Object</code></td><td>null</td><td>false</td><td>只允许接受这样的对象 <code>{props: {}}</code>, 用于把 props 透传给 table-colum</td></tr><tr><td>formControl</td><td><code>Object</code></td><td>null</td><td>false</td><td>用于透传给对应 form 控件的 props/on...</td></tr><tr><td>render</td><td><code>Function</code></td><td>默认 render</td><td>false</td><td>对 table cell 中的数据进行处理以便更好的展示</td></tr><tr><td>group</td><td><code>String</code></td><td>undefined</td><td>'default'</td><td>false</td></tr><tr><td>deps</td><td><code>Array</code></td><td>undefined</td><td>false</td><td>声明依赖的 schema，便捷的进行联动设置</td></tr><tr><td>children</td><td><code>Array</code></td><td>[]</td><td>false</td><td>当前表单的子组件（需要表单组件支持接受 slot）</td></tr></tbody></table><h6 id="schema-input-options-editable"><a href="#schema-input-options-editable" aria-hidden="true" class="header-anchor">#</a> schema/Input/options/editable</h6><p>当 mode 为 EDIT_IN_TABLE 或者 EDIT_IN_CELL 时，editable 函数会接受当前 row 作为第一个参数</p><h6 id="schema-input-options-indexed"><a href="#schema-input-options-indexed" aria-hidden="true" class="header-anchor">#</a> schema/Input/options/indexed</h6><p>允许多个 schema 的 indexed 设置为 true，会统一作为 query 对象。如果没有一个 schema 的 indexed 为 true，key 为 <code>id</code> 的 schema 会做为索引字段。</p><h6 id="schema-input-options-formcontrol"><a href="#schema-input-options-formcontrol" aria-hidden="true" class="header-anchor">#</a> schema/Input/options/formControl</h6><p>会透传下面这些对象给 form 控件：</p><ul><li>props: 除了 value</li><li>on</li><li>className</li><li>attrs</li><li>domProps</li><li>nativeOn</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果需要传入可计算的 props，比如 disabled，可以像下面这么做：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Input</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      asFilter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      editable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      group<span class="token punctuation">:</span> <span class="token string">'address'</span><span class="token punctuation">,</span>
      formControl<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        attrs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          placeholder<span class="token punctuation">:</span> <span class="token string">'如果 sex 输入 1, 这里会被禁用'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token function">_disabled_</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">[</span><span class="token string">'personView'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>create<span class="token punctuation">.</span>sex <span class="token operator">===</span> <span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>普通的 props 前后加上 <code>_</code>，就可以写成函数，当成计算属性使用, 包括 action 和 customHook 中的 props</p></div><p>formControl 支持下面两个函数，以便对 value 进行拦截设置：</p><ul><li><p>valueGetter(value)
对 model 中存储的 value 进行处理，以正确的显示在表单中</p><div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">valueGetter</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 常见的一个情况把秒数转为时间戳</span>
    <span class="token keyword">return</span> value <span class="token operator">*</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li><li><p>valueSetter(value)
对表单传入的 value 进行处理，以便储存在 model 中发给后端</p><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">valueSetter</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 把表单传入的时间戳转为秒数存下来</span>
    <span class="token keyword">return</span> value <span class="token operator">/</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ul><h6 id="schema-input-options-render-h-value-row-props"><a href="#schema-input-options-render-h-value-row-props" aria-hidden="true" class="header-anchor">#</a> schema/Input/options/render([h], value, row, props)</h6><ul><li><p>Arguments:</p><ul><li>h $createElement 如果返回的是组件，第一个参数时 $createElement</li><li>value: 当前单元格的数据</li><li>(Object) row: 当前行的数据</li><li>(Object) props: 传入额外参数：
<ul><li>(Number) $index 当前列索引</li><li>(Object) column 当前列的其他信息</li><li>(Object) row 同第二个参数</li><li>更多字段信息可以 console 了解</li></ul></li></ul></li><li><p>Usage:
支持三种返回：</p><ul><li>number/ string</li><li>html</li><li>JSX (VNode)</li></ul></li></ul><p>返回 html</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`&lt;button&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/button&gt;`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>返回组件</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 注意第一个参数是 h</span>
<span class="token function">render</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`&lt;el-switch&gt;&lt;/el-switch&gt;`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果 render 函数缺省，会使用默认的 render 函数：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">defaultRender</span> <span class="token operator">=</span> value <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span>length <span class="token operator">?</span> value<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">'/'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> value
<span class="token punctuation">}</span>
</code></pre></div><p>tip: render 函数不支持返回 Promise，如果依赖异步拉取的数据，推荐使用 <a href="#viewdeclareobject-options-interceptors-beforeenter-to-from-next">interceptors/beforeEnter</a></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在进入页面的时候先拉取 render 中需要的数据</span>
interceptors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">beforeEnter</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>project<span class="token punctuation">.</span>list<span class="token punctuation">.</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'project/list'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>count<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h6 id="schema-input-options-group"><a href="#schema-input-options-group" aria-hidden="true" class="header-anchor">#</a> schema/Input/options/group</h6><p>在 table 中：</p><ul><li>存在 group 的，group 会作为一级表头，schema 的 label 为二级表头</li><li>同一 group 的会被按顺序收集在以 group 为名的一级表头下</li><li>没有 group 的，schema 的 label 为一级表头</li></ul><p>在表单中：</p><ul><li>如果没有一个 schema 设置 group 值，则不会进行分组展示</li><li>如果存在一个，缺省设置的 schema 都会被归到 default 组</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  group<span class="token punctuation">:</span> <span class="token string">'Base Info'</span>
<span class="token punctuation">}</span>
</code></pre></div><h6 id="schema-input-options-deps"><a href="#schema-input-options-deps" aria-hidden="true" class="header-anchor">#</a> schema/Input/options/deps</h6><ul><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  deps<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'city'</span><span class="token punctuation">,</span> <span class="token string">'zone'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>city<span class="token punctuation">,</span> zone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">travel</span><span class="token punctuation">(</span><span class="token string">'cell'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            label<span class="token punctuation">:</span> city <span class="token operator">+</span> zone<span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> city <span class="token operator">+</span> zone
          <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><p>deps 接收数组：
[schemaKey: String, ..., callback(value, ...)]</p><ul><li>schemaKey: 依赖 schema 的 key，可以多个。</li><li>callback: 任何一个依赖的 schema value 变动时即调用该函数，依次为依赖 schema 值。</li></ul><h4 id="schema-select"><a href="#schema-select" aria-hidden="true" class="header-anchor">#</a> schema/Select</h4><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Select</span><span class="token punctuation">(</span>lable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> items<span class="token punctuation">,</span> rules<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><p>lable, key, rules, options 用法同 <a href="#schema-input">Input</a></p><ul><li>(Array|Function) items: select 控件的选项</li></ul><p>当为 <code>Array</code> 时，包含的元素必须是有如下结构的对象：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  label<span class="token punctuation">:</span> <span class="token string">'显示'</span><span class="token punctuation">,</span>
  value<span class="token punctuation">:</span> <span class="token string">'实际值'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当为 <code>Function</code> 时：</p><ul><li>如果返回的是数组，结构也必须如上</li><li>如果返回的是 Promise，Promise resolve 是返回的也必须为如上结构的数组</li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>当 asTabFilter 为 true 是，function 不支持返回 Promis</p></div><p>MultiSelect 和 Select 用法一样。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>当 asTabFilter 为 true 的时候必须使用 schema.Select 来生成 schema 对象。</p><p>而且当设置 asTabFilter 为 true 时，formControl 仅支持change 事件：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Select</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    label<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
    value<span class="token punctuation">:</span> <span class="token string">'1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    label<span class="token punctuation">:</span> <span class="token string">'test1'</span><span class="token punctuation">,</span>
    value<span class="token punctuation">:</span> <span class="token string">'2'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  asTabFilter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  formControl<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token function">change</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">travel</span><span class="token punctuation">(</span><span class="token string">'dynamicFilter'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>asFilter <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">travel</span><span class="token punctuation">(</span><span class="token string">'dynamicFilter'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>asFilter <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div><h4 id="schema-plaintext"><a href="#schema-plaintext" aria-hidden="true" class="header-anchor">#</a> schema/PlainText</h4><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>PlainText</span><span class="token punctuation">(</span>lable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> rules<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><p>lable, key, rules, options 用法同 <a href="#schema-input">Input</a></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>格式化显示的内容时需要设置 valueGetter</p></div><h4 id="schema-custom"><a href="#schema-custom" aria-hidden="true" class="header-anchor">#</a> schema/Custom</h4><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Custom</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> lable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> rules<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><p>lable, key, rules, options 用法同 <a href="#schema-input">Input</a>，type 为通过 <a href="#config-types">Global Config</a> 自定义的 type。</p><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 先在 config 中定义 type 使用的组件</span>
  Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>acribus<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    request<span class="token punctuation">,</span>
    types<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      autocomplete<span class="token punctuation">:</span> <span class="token string">'el-autocomplete'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 在资源声明时就可以这样使用了</span>
  <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Custom</span><span class="token punctuation">(</span><span class="token string">'autocomplete'</span><span class="token punctuation">,</span> <span class="token string">'autocomplete'</span><span class="token punctuation">,</span> <span class="token string">'autocomplete'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    asFilter<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="constant"><a href="#constant" aria-hidden="true" class="header-anchor">#</a> constant</h3><ul><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> constant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'acribus'</span>
</code></pre></div></li></ul><p>constant 包含如下常量：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// mode 字段的枚举</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">MODE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">EDIT_IN_DIALOG</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">EDIT_IN_NEW_PAGE</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token constant">EDIT_IN_TABLE</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token constant">EDIT_IN_CELL</span><span class="token punctuation">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">URL_STYLE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">RESTFUL</span><span class="token punctuation">:</span> <span class="token string">'restful'</span><span class="token punctuation">,</span>
  <span class="token constant">ACTION_IN_URL</span><span class="token punctuation">:</span> <span class="token string">'actionInUrl'</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">RESOURCE_ACTION_TYPE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">LIST</span><span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
  <span class="token constant">ONE</span><span class="token punctuation">:</span> <span class="token string">'one'</span><span class="token punctuation">,</span>
  <span class="token constant">ADD</span><span class="token punctuation">:</span> <span class="token string">'add'</span><span class="token punctuation">,</span>
  <span class="token constant">UPDATE</span><span class="token punctuation">:</span> <span class="token string">'update'</span><span class="token punctuation">,</span>
  <span class="token constant">DEL</span><span class="token punctuation">:</span> <span class="token string">'delete'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="context"><a href="#context" aria-hidden="true" class="header-anchor">#</a> context</h3><p><a href="#resourcedeclareobject">resourceDeclareObject</a> 和 <a href="#viewdeclareobject">viewDeclareObject</a> 中所有的函数 this 都指向 context 对象（除了箭头函数和 get set 函数）。</p><p>context 同时被挂载在 acribus 上，可以通过下面方式引入：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'acribus'</span>
</code></pre></div><p>context 是一个 Vue 实例，具有<a href="https://vuejs.org/v2/api/#Instance-Properties" target="_blank" rel="noopener noreferrer">Vue 实例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的所有属性和方法。
同时可以访问 Vuex 和 vue-router 挂载的对象:</p><ul><li><code>context.$store</code></li><li><code>context.$router</code></li><li><code>context.$route</code></li></ul><p>除此之外，acribus 还在 context 上附加了一些实用方法：</p><ul><li><code>context.travel(resourceName: String)</code></li><li><code>context.append(view: String, jsxExp)</code></li><li><code>context.rmAppend(view: String)</code></li><li><code>context.$getCustomHookByLabel(label: String)</code></li><li><code>context.getCustomHookByLabel(resourceName: String,label: String)</code></li><li><code>context.$getActionByLabel(label: String)</code></li><li><code>context.getActionByLabel(resourceName: String,label: String)</code></li><li><code>context.$refreshTable()</code></li><li><code>context.refreshTable(resourceName: String)</code></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>context 下以 <code>$</code> 开头的方法只能在 <code>resourceDeclareObject</code> 和 <code>viewdeclareobject</code> 中使用，Vue 文件里使用不带 $ 的同名方法。</p></div><h4 id="context-travel"><a href="#context-travel" aria-hidden="true" class="header-anchor">#</a> context.travel</h4><p>用于遍历给定资源的 schema。</p><ul><li><p>Arguments:</p><ul><li>resourceName: 资源名</li></ul></li><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">travel</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    label<span class="token punctuation">:</span> <span class="token string">'test'</span>
    value<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div></li></ul><p>context.travel 返回一个对象，该对象包含 getField 方法：
getField(key: String)， 接受 schema 的 key 作为参数，并返回给定 key 的 schema。</p><ul><li>用途：
所有的 resourceDeclareObject 和 viewDeclareObject 都被储存在 store 中，用于唯一的映射出界面。当需要修改 store 以更改界面时，travel 可以辅助定位到待修改的地方。</li></ul><h4 id="context-append"><a href="#context-append" aria-hidden="true" class="header-anchor">#</a> context.append</h4><p>向给定视图的 default slot 写入 template。一般用于临时写入一个全局弹窗。
等价于：</p><div class="language-js extra-class"><pre class="language-js"><code>  _storeInstance<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>viewName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">View/slots`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>key<span class="token punctuation">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>value<span class="token punctuation">:</span> jsxExp<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Usage：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="context-rmappend"><a href="#context-rmappend" aria-hidden="true" class="header-anchor">#</a> context.rmAppend</h4><p>移出给定视图的 default slot 的 template。
等价于：</p><div class="language-js extra-class"><pre class="language-js"><code>  _storeInstance<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>viewName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">View/slots`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>key<span class="token punctuation">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>value<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Usage：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">rmAppend</span><span class="token punctuation">(</span><span class="token string">'person'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="safeget"><a href="#safeget" aria-hidden="true" class="header-anchor">#</a> safeGet</h3><p>用于安全的读取嵌套对象中的属性。</p><ul><li><p>Arguments:</p><ul><li>(Object) data: 待读取属性的对象</li><li>(String) path: 属性读取路径</li></ul></li><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">safeGet</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">,</span> <span class="token string">'state.test'</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h3 id="standardizeresource"><a href="#standardizeresource" aria-hidden="true" class="header-anchor">#</a> standardizeResource</h3><p>当使用 Proto 生成的 resourceDeclareObject，需要先使用 standardizeResource 对里面的字段进行一些转换</p><ul><li><p>Arguments:</p><ul><li><code>Object</code> resourceDeclareObject Proto导出的 JSON 表示的 resourceDeclareObject</li></ul></li><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>standardizeResource<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'acribus'</span>
<span class="token function">standardizeResource</span><span class="token punctuation">(</span>resourceDeclareObject<span class="token punctuation">)</span>
</code></pre></div></li></ul><h3 id="updateallcomponents"><a href="#updateallcomponents" aria-hidden="true" class="header-anchor">#</a> updateAllComponents</h3><p>对所有组件从上到下更新</p><ul><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>updateAllComponents<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'acribus'</span>
<span class="token function">updateAllComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h3 id="mergehelper"><a href="#mergehelper" aria-hidden="true" class="header-anchor">#</a> mergeHelper</h3><p>当使用 Proto 生成的配置文件时，可能需要使用这些辅助函数以便对 resourceDeclareObject 和 viewDeclareObject 快速修改。mergeHelper 包含 5个辅助函数：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>mergeHelper<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'acribus'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>deepAssign<span class="token punctuation">,</span> mergeSchema<span class="token punctuation">,</span> mergeSchemaOptionsByKey<span class="token punctuation">,</span> mergeViewActionByLabel<span class="token punctuation">,</span> mergeViewCustomhookByLabel<span class="token punctuation">}</span> <span class="token operator">=</span> mergeHelper
</code></pre></div><h4 id="deepassign"><a href="#deepassign" aria-hidden="true" class="header-anchor">#</a> deepAssign</h4><p>对嵌套的对象，递归执行 Object.assign，接受的参数和 Object.assign相同</p><ul><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">standardizeResource</span><span class="token punctuation">(</span>resourceDeclareObject<span class="token punctuation">)</span>
<span class="token function">deepAssign</span><span class="token punctuation">(</span>resourceDeclareObject<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    schema<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      key<span class="token punctuation">:</span> <span class="token string">'test'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="mergeschema"><a href="#mergeschema" aria-hidden="true" class="header-anchor">#</a> mergeSchema</h4><p>根据 key 正确定位到对应的 schema 并进行 deepAssign</p><ul><li><p>Arguments:</p><ul><li><code>Object</code> resourceDeclareObject: Proto导出的 JSON 表示的 resourceDeclareObject</li><li><code>Object</code> schema: schema 辅助函数返回的对象</li></ul></li><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mergeSchema</span><span class="token punctuation">(</span>resourceDeclareObject<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Input</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="mergeschemaoptionsbykey"><a href="#mergeschemaoptionsbykey" aria-hidden="true" class="header-anchor">#</a> mergeSchemaOptionsByKey</h4><p>根据 key 正确定位到对应的 schema 并对其 options 执行 deepAssign</p><ul><li><p>Arguments:</p><ul><li>·Object` resourceDeclareObject: Proto导出的 JSON 表示的 resourceDeclareObject</li><li><code>String</code>: schema 的 key</li><li><code>Object</code> options: schema 接受的 options</li></ul></li><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mergeSchemaOptionsByKey</span><span class="token punctuation">(</span>resourceDeclareObject<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  formControl<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'test'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="mergeviewactionbylabel"><a href="#mergeviewactionbylabel" aria-hidden="true" class="header-anchor">#</a> mergeViewActionByLabel</h4><p>根据 label 正确定位到对应的 action 并对其执行 deepAssign</p><ul><li><p>Arguments:</p><ul><li>·Object` viewDeclareObject: Proto导出的 JSON 表示的 viewDeclareObject</li><li><code>String</code>: action 的 label</li><li><code>Object</code> action 对象</li></ul></li><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mergeViewActionByLabel</span><span class="token punctuation">(</span>viewDeclareObject<span class="token punctuation">,</span> <span class="token string">'Edit'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="mergeviewcustomhookbylabel"><a href="#mergeviewcustomhookbylabel" aria-hidden="true" class="header-anchor">#</a> mergeViewCustomhookByLabel</h4><p>根据 label 正确定位到对应的 customHook 并对其执行 deepAssign</p><ul><li><p>Arguments:</p><ul><li>·Object` viewDeclareObject: Proto导出的 JSON 表示的 viewDeclareObject</li><li><code>String</code>: customHook 的 label</li><li><code>Object</code> customHook 对象</li></ul></li><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mergeViewActionByLabel</span><span class="token punctuation">(</span>viewDeclareObject<span class="token punctuation">,</span> <span class="token string">'Export'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'default'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h2 id="resourcedeclareobject"><a href="#resourcedeclareobject" aria-hidden="true" class="header-anchor">#</a> resourceDeclareObject</h2><table><thead><tr><th>配置项</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>schema</td><td><code>Array</code></td><td>null</td><td>true</td><td>schema 集合</td></tr><tr><td>url</td><td><code>String|Object</code></td><td>undefined</td><td>true</td><td>资源地址</td></tr><tr><td>triggerSearchAfterResourceChange</td><td><code>Boolean</code></td><td>true</td><td>false</td><td>是否在资源变动后（create/update/delete）后执行 search</td></tr></tbody></table><h3 id="resourcedeclareobject-schema-item"><a href="#resourcedeclareobject-schema-item" aria-hidden="true" class="header-anchor">#</a> resourceDeclareObject/schema[]/item</h3><p>接受两种类型的值为 item：</p><ul><li><p><code>Object</code>: 使用 <a href="#schema">schema 构造函数生成的对象</a></p></li><li><p><code>String</code>: 该 string 会使用下面方法展开：</p><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> lowerCase <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> formattedKey <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Input</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> formattedKey<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ul><h3 id="resourcedeclareobject-url"><a href="#resourcedeclareobject-url" aria-hidden="true" class="header-anchor">#</a> resourceDeclareObject/url</h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>如果 urlStyle 为 actionInUrl，在写 url 的时候应该省去最后的 search/create/detail/update/delete，后面的会自动补全</p></div><ul><li>如果 url 是 <code>String</code>，Acribus 会根据<a href="#config-urlstyle">urlStyle</a>来决定如何构造资源操作对象</li><li>如果 url 是 <code>Object</code>，根据需要，该对象要包含如下属性
<ul><li>list: 拉取列表的 url(<code>String</code>) 或直接提供请求函数(<code>Function</code>)</li><li>one: 拉取详情的 url(<code>String</code>) 或直接提供请求函数(<code>Function</code>)</li><li>add: 创建的 url(<code>String</code>) 或直接提供请求函数(<code>Function</code>)</li><li>update: 更新的 url(<code>String</code>) 或直接提供请求函数(<code>Function</code>)</li><li>delete: 删除的 url(<code>String</code>) 或直接提供请求函数(<code>Function</code>)</li><li>export: 导出的 url(<code>String</code>) 或直接提供请求函数(<code>Function</code>)</li></ul></li></ul><p>资源操作对象:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token function">list</span> <span class="token punctuation">(</span>params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token punctuation">{</span> params <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">one</span> <span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span>one<span class="token punctuation">,</span> query<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">add</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span>add<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">update</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span>update<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">delete</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">export</span> <span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token keyword">export</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>示例：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  schema<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    list<span class="token punctuation">:</span> <span class="token string">'api/list'</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">one</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    add<span class="token punctuation">:</span> <span class="token string">'api/add'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>url对象中，可以采用<code>String</code> 和 <code>Function</code> 混写的方式，只在需要的时候书写自定义请求函数</p></div><h3 id="resourcedeclareobject-triggersearchafterresourcechange"><a href="#resourcedeclareobject-triggersearchafterresourcechange" aria-hidden="true" class="header-anchor">#</a> resourceDeclareObject/triggerSearchAfterResourceChange</h3><p>这个设置和 <a href="https://acribus.github.io/acribus/zh/api/#resource-name-resourcedeclareobject-triggersearchafterresourcechange" target="_blank" rel="noopener noreferrer">resource 第三个参数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>作用一致，如果同时出现，这里的设置会被忽略。</p><h2 id="viewdeclareobject"><a href="#viewdeclareobject" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject</h2><table><thead><tr><th>配置项</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>mode</td><td><code>Number</code></td><td>1</td><td>false</td><td>1/2/3/4， 一般从 <a href="#constant">constant</a> 引入使用</td></tr><tr><td>main</td><td><code>String</code></td><td>undefined</td><td>true</td><td>资源名</td></tr><tr><td>actions</td><td><code>Array</code></td><td><code>[]</code></td><td>false</td><td>定义 table 中每列的 button, 有并发控制，在执行完 或 promise resolve 前，按钮会被禁用</td></tr><tr><td>customHooks</td><td><code>Array</code></td><td><code>[]</code></td><td>false</td><td>除 actions 之外的 button, 有并发控制，在执行完 或 promise resolve 前，按钮会被禁用</td></tr><tr><td>options</td><td><code>Object</code></td><td>null</td><td>false</td><td>额外配置项</td></tr></tbody></table><h3 id="viewdeclareobject-actions-item"><a href="#viewdeclareobject-actions-item" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/actions[]/item</h3><p>允许 <code>String</code> or <code>Object</code> 作为数组的元素：</p><ul><li><p>当为 String 时，必须为 edit、detail、delete 之一，对应展开后的 Object 为：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// edit</span>
<span class="token punctuation">{</span>
  label<span class="token punctuation">:</span> <span class="token string">'edit'</span><span class="token punctuation">,</span>
  <span class="token function">handler</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>view<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/edit`</span></span><span class="token punctuation">,</span> query<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// detail</span>
<span class="token punctuation">{</span>
  label<span class="token punctuation">:</span> <span class="token string">'detail'</span><span class="token punctuation">,</span>
  <span class="token function">handler</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>view<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/detail`</span></span><span class="token punctuation">,</span> query<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// delete</span>
<span class="token punctuation">{</span>
  label<span class="token punctuation">:</span> <span class="token string">'detail'</span><span class="token punctuation">,</span>
  <span class="token function">handler</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用 delete api</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>this.view</code> 为当前视图路径， <code>query</code> 根据设置的设置的 <a href="#schema-input-options">indexed schema</a> 来取得</p></li><li><p>当为 Object 时，支持的配置项：</p><ul><li>(String) label: button 名</li><li>(Function) handler(row, index): button 点击的处理函数
<ul><li>Arguments:
<ul><li>(Object) row: button 所在行的数据</li><li>(Number) index: button 所在行索引</li></ul></li></ul></li><li>(Object) options: 支持下面两个配置项：
<ul><li>(Function|Boolean) hide(row, index): 如果为函数，参数同 handler，返回 true/false；或者直接设置为 true/false</li><li>(Object) props: 透传给对应 button 的 props</li><li>... <a href="#options">其他支持的配置</a></li></ul></li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果需要传入可计算的 props，可以像 schema 中一样，普通的 props 前后加上 <code>_</code>，就可以写成函数，当成计算属性使用。而且每个函数会传入当前 row 作为第一个参数。</p></div><p>示例：</p><div class="language-js extra-class"><pre class="language-js"><code>actions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token comment">// 不需要 i18n 翻译，内部会处理</span>
  label<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
  <span class="token function">handler</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">hide</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
       <span class="token function">_disabled_</span> <span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'row'</span><span class="token punctuation">,</span> row<span class="token punctuation">)</span>
          <span class="token keyword">return</span> row<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token number">2</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="viewdeclareobject-customhooks"><a href="#viewdeclareobject-customhooks" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/customHooks</h3><p>customHooks 默认有 Create 按钮，如果要隐藏，可以在 <a href="#viewdeclareobject-options">options</a> 中设置。</p><p>customHooks 只接受 Object 作为数组的元素。配置项和 <a href="#viewdeclareobject-actions-item">actions</a>，唯一的区别在 handler 接受的参数不同，在 customHooks 中 handler 只接受 event 对象作为唯一参数。</p><h3 id="viewdeclareobject-options"><a href="#viewdeclareobject-options" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options</h3><p>可以接收的配置项：</p><table><thead><tr><th>配置项</th><th>type</th><th>default</th><th>required</th><th>desc</th></tr></thead><tbody><tr><td>hideCreateBtn</td><td><code>Boolean</code></td><td>false</td><td>false</td><td>是否隐藏列表页的 create btn</td></tr><tr><td>hidePagination</td><td><code>Boolean</code></td><td>false</td><td>false</td><td>是否隐藏 pagination</td></tr><tr><td>hideCancelBtn</td><td><code>Boolean</code></td><td>false</td><td>false</td><td>是否隐藏 ACreateForm 的 cancel 按钮</td></tr><tr><td>disableAutoList</td><td><code>Boolean</code></td><td>false</td><td>false</td><td>是否在刚进入列表页是就拉取 table 的数据</td></tr><tr><td>columnEditable</td><td><code>Boolean</code></td><td>false</td><td>false</td><td>是否启用 table 的列编辑功能</td></tr><tr><td>interceptors</td><td><code>Object</code></td><td>null</td><td>false</td><td>在这里注册所有关键操作的拦截器, <a href="#viewdeclareobject-options-interceptors">介绍</a></td></tr><tr><td>subscribe</td><td><code>Function</code></td><td>null</td><td>false</td><td>注册 store 的监听 <a href="#viewdeclareobject-options-subscribe">介绍</a></td></tr><tr><td>slots</td><td><code>Object</code></td><td>null</td><td>false</td><td>在关键位置插入自定义模板， <a href="#viewdeclareobject-options-slots">介绍</a></td></tr><tr><td>selection</td><td><code>Object|Boolean</code></td><td>false</td><td>false</td><td>是否启用 table 选择功能，<a href="#viewdeclareobject-options-selection">介绍</a></td></tr><tr><td>expand</td><td><code>Function</code></td><td>null</td><td>false</td><td>是否启用 table 行展开功能，<a href="#viewdeclareobject-options-expand">介绍</a></td></tr><tr><td>table</td><td><code>Object</code></td><td>null</td><td>false</td><td>必须为如下结构对象<code>{props: {},on: {}}</code>，用于透传 props &amp; on 到 table</td></tr><tr><td>pagination</td><td><code>Object</code></td><td>null</td><td>false</td><td>必须为如下结构对象<code>{props: {},on: {}}</code>，用于透传 props &amp; on 到 pagination</td></tr><tr><td>lazyPageSize</td><td><code>Boolean</code></td><td>false</td><td>false</td><td>是否对 table 和分页数据分步加载，适用用数据量比较大的列表页。注意：对 url 的约定：<code>主资源名/total/detail</code> 拉取对应的 pageSize 数据</td></tr></tbody></table><h4 id="viewdeclareobject-options-interceptors"><a href="#viewdeclareobject-options-interceptors" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/interceptors</h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>当需要使用 interceptors 时，往往意味着和后端约定出了问题，应首先考虑接口修改。</p></div><div class="language-js extra-class"><pre class="language-js"><code>interceptors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在视图路由进入</span>
  <span class="token function">beforeEnter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 发生在拉去单条数据的时候（详情、编辑）, params 为当前Url query 对象</span>
  <span class="token function">one</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 发生搜索请求前</span>
  <span class="token function">search</span><span class="token punctuation">(</span>params<span class="token punctuation">:</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 创建</span>
  <span class="token function">create</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 更新</span>
  <span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="viewdeclareobject-options-subscribe"><a href="#viewdeclareobject-options-subscribe" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/subscribe</h4><p>subscribe 会在注册视图时立即调用，注入的参数：</p><ul><li>subscribe: <a href="https://vuex.vuejs.org/zh/api/#subscribe" target="_blank" rel="noopener noreferrer">store 的方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>subscribeAction: <a href="https://vuex.vuejs.org/zh/api/#subscribeaction" target="_blank" rel="noopener noreferrer">store 的方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="language-js extra-class"><pre class="language-js"><code>options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">subscribe</span> <span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> subscribeAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mutation<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>payload<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">subscribeAction</span><span class="token punctuation">(</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="viewdeclareobject-options-interceptors-beforeenter-to-from-next"><a href="#viewdeclareobject-options-interceptors-beforeenter-to-from-next" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/interceptors/beforeEnter(to, from, next)</h4><p>路由进入视图时调用，用法见 <a href="https://router.vuejs.org/guide/advanced/navigation-guards.html#in-component-guards" target="_blank" rel="noopener noreferrer">vue-router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h4 id="viewdeclareobject-options-interceptors-one-params"><a href="#viewdeclareobject-options-interceptors-one-params" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/interceptors/one(params)</h4><ul><li><p>Arguments:</p><ul><li>(Object) params: 为当前请求携带的参数，</li></ul></li><li><p>Usage: 修改 params 并返回，如果不返回任何数据请求会终止。</p></li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">one</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  params<span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">return</span> params
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>search/create/update 使用和 one 类似。</p><h4 id="viewdeclareobject-options-slots"><a href="#viewdeclareobject-options-slots" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/slots</h4><p>支持的配置项：</p><table><thead><tr><th>配置项</th><th>type</th><th>desc</th></tr></thead><tbody><tr><td>beforeQuery</td><td><code>Function</code></td><td>在查询表单前插入自定义模板</td></tr><tr><td>afterQuery</td><td><code>Function</code></td><td>在查询表单后插入自定义模板</td></tr><tr><td>beforeTable</td><td><code>Function</code></td><td>在查询表格前插入自定义模板</td></tr><tr><td>afterTable</td><td><code>Function</code></td><td>在查询表格后插入自定义模板</td></tr><tr><td>beforeCreate</td><td><code>Function</code></td><td>在 创建/编辑/查看 表单前插入自定义模板</td></tr><tr><td>afterCreate</td><td><code>Function</code></td><td>在 创建/编辑/查看 表单后插入自定义模板</td></tr><tr><td>default</td><td><code>Function</code></td><td>在视图全局插入自定义模板</td></tr></tbody></table><p>每个函数返回特定位置需要插入的 template，并且这些函数的返回值会被同步到 store，以便之后需要时改动。
<a href="#context-append">context.append</a> 即是对 store 中的 default slot 进行修改的 shortcut。</p><p>Usage:
推荐以 JSX 的形式来书写每个函数返回的 template</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tabs <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    label<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
    url<span class="token punctuation">:</span> <span class="token string">'/test'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
slots<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在查询表单前插入 tabs</span>
  <span class="token function">beforeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ATabs tabs<span class="token operator">=</span><span class="token punctuation">{</span>tabs<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>JSX 中使用的组件并不需要提前声明，只需要引入即可。</p></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> ExportModal <span class="token keyword">from</span> <span class="token string">'./components/ExportModal'</span>

slots<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在全局插入一个导出弹窗</span>
  <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ExportModal <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="viewdeclareobject-options-selection"><a href="#viewdeclareobject-options-selection" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/selection</h4><p>selection 接受 true/false:</p><ul><li>true 开启列选择功能</li><li>false 关闭</li></ul><p>当 selection 接受的为对象时，列选择功能会被开启，同时对象的 props 属性会被透传给对应的 <code>el-table-column</code> 组件:</p><div class="language-js extra-class"><pre class="language-js"><code>selection<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">:</span> <span class="token number">100</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="viewdeclareobject-options-expand"><a href="#viewdeclareobject-options-expand" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/expand</h4><p>expand 接收 function (注意不要使用箭头函数) 则会开启行展开功能，接受的函数签名如下:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expand</span> <span class="token punctuation">(</span>props<span class="token punctuation">:</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token comment">/*JSX expression*/</span>
<span class="token punctuation">}</span>
</code></pre></div><p>expand 函数接收的 props 中的 row 属性为当前展开行的数据。eg:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 注意：JSX 中使用的组件都要引入</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ElForm<span class="token punctuation">,</span> ElFormItem<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-ui'</span>

<span class="token function">expand</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ElForm label<span class="token operator">-</span>position<span class="token operator">=</span><span class="token string">&quot;left&quot;</span> inline <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;demo-table-expand&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ElFormItem label<span class="token operator">=</span><span class="token string">&quot;商品名称&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>row<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ElFormItem<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ElFormItem label<span class="token operator">=</span><span class="token string">&quot;所属店铺&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>row<span class="token punctuation">.</span>shop<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ElFormItem<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ElForm<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>resourceDeclareObject 和 viewDeclareObject 内所有函数的定义不能使用箭头函数，否则无法绑定 this 到 <a href="#context">context</a>。</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>resourceDeclareObject 和 viewDeclareObject 所有的值都可以使用 get set 的写法：</p></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">schema<span class="token punctuation">.</span>Input</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">,</span> <span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      formControl<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// 像这样传递get 函数</span>
          <span class="token keyword">get</span> <span class="token function">disabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'edit'</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>但是 get 和 set 函数里的 this 并不指向 <a href="#context">context</a>，如需使可以手动引入 <a href="#context">context</a>，需要注意的是如果读取 $store，推荐使用 <a href="#safeget">safeGet</a>，以防止未挂载 $store 之前读取导致的报错：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>safeGet<span class="token punctuation">,</span> context<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'acribus'</span>
formControl<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">get</span> <span class="token function">disabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 注意：get 函数里 this 并不指向 context，如需使用直接从 acribus 导入即可</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'edit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// 推荐这样写 safeGet，因为有时候可能$store都没有挂载，比如 Textarea 中</span>
              <span class="token keyword">return</span> <span class="token function">safeGet</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">'$store.state.zoneView.create.storage_attr'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'StagingArea'</span> <span class="token operator">||</span> <span class="token function">safeGet</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token string">'zoneView.create.storage_attr'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">2</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>schema -&gt; formControl -&gt; props 是作为计算属性使用时，推荐下面的<a href="#schema-input-options-formcontrol">写法</a>:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>safeGet<span class="token punctuation">,</span> context<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'acribus'</span>
formControl<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">_disabled_</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注意：get 函数里 this 并不指向 context，如需使用直接从 acribus 导入即可</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'edit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 推荐这样写 safeGet，因为有时候可能$store都没有挂载，比如 Textarea 中</span>
        <span class="token keyword">return</span> <span class="token function">safeGet</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">'$store.state.zoneView.create.storage_attr'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'StagingArea'</span> <span class="token operator">||</span> <span class="token function">safeGet</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token string">'zoneView.create.storage_attr'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">2</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="viewdeclareobject-options-table"><a href="#viewdeclareobject-options-table" aria-hidden="true" class="header-anchor">#</a> viewDeclareObject/options/table</h4><p>table props 的 heigth 和 maxHeight 支持函数写法，和 formControl 里的 props 函数写法一致，前后加一个 <code>_</code>:</p><div class="language-js extra-class"><pre class="language-js"><code>options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    table<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">_height_</span> <span class="token punctuation">(</span>$tableEle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> $tableEle<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>offsetHeight <span class="token operator">-</span> <span class="token number">100</span>
          <span class="token comment">// or</span>
          <span class="token keyword">return</span> <span class="token number">100</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">_maxHeight_</span><span class="token punctuation">(</span>$tableEle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// return $tableEle.$el.offsetHeight - 100</span>
          <span class="token comment">// or</span>
          <span class="token keyword">return</span> <span class="token number">100</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>函数接受的第一个参数为 table 实例。</p><h2 id="store"><a href="#store" aria-hidden="true" class="header-anchor">#</a> Store</h2><p>在 Acribus 中，Store 是视图的 only trueth。可以通过对 Store 的控制达到对视图的完全控制。所以熟悉 Store 的结构以便对其操作。</p><p>Acribus 为每个资源和视图在 Store 中开辟单独字段来储存相关信息。</p><p>调用 <a href="#resource-name-resourcedeclareobject-isautolist">resource</a> 接口时，会使用 <a href="#registermodule-name-module-api-isautolist">registerModule</a> 在 Store 中挂载下面的对象，储存该资源增删改查的状态及结果：</p><div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token constant">RESOURCE_ACTION_TYPE</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        isFetching<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        item<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>每个 <a href="#constant">RESOURCE_ACTION_TYPE</a> 都有下面这样一个对象：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  isFetching<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  item<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>(Boolean) isFetching: 是否正在发送请求中。</li><li>(Object) item: <a href="#config-respdataextractor">respDataExtractor(resp, value)</a> 返回的结果。resp 为 http 请求返回的对象。</li><li>(Object) error：当请求发生错误时，返回结果会被储存在这。</li></ul><p>每个 <a href="#constant">RESOURCE_ACTION_TYPE</a> 都对应一个同名的 action：
list/one/add/update/delete，每个资源的 Vuex module 在注册时 namespaced 都设为 true，所以用法如下：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resourceName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/list`</span></span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>
</code></pre></div><p>所以每使用 <a href="#resource-name-resourcedeclareobject-isautolist">resource</a>(包括 <a href="#registermodule-name-module-api-isautolist">registerModule</a>)，Store 会被挂载下面这样一个对象：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>resourceName<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  list<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    isFetching<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    item<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    error<span class="token punctuation">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  one<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  add<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  update<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token keyword">delete</span><span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// listParams对象仅储存该resource上一次list action携带的参数，不对应action</span>
  listParams<span class="token punctuation">:</span> <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>并且可以 dispatch 如下 action，并携带参数：</p><ul><li>(<code>${resourceName}/list</code></li><li>(<code>${resourceName}/one</code></li><li>(<code>${resourceName}/add</code></li><li>(<code>${resourceName}/update</code></li><li>(<code>${resourceName}/delete</code></li></ul><p>调用 <a href="#register-viewdeclareobject-viewdeclareobject">register</a> 接口时，会在 Store 中以视图中资源名 + View( <code>${resourceName}View</code> ) 挂载如下结构的对象：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 config<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 query<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 create<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 $queryForm<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
 $createForm<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
 $table<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
 pagination<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> props<span class="token punctuation">.</span>pageSize <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 默认 pageSize</span>
    pageno<span class="token punctuation">:</span> props<span class="token punctuation">.</span>currentPage <span class="token operator">||</span> <span class="token number">1</span> <span class="token comment">// 默认当前页</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 slots<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   beforeQuery<span class="token punctuation">:</span> <span class="token keyword">null</span>
   afterQuery<span class="token punctuation">:</span> <span class="token keyword">null</span>
   beforeTable<span class="token punctuation">:</span> <span class="token keyword">null</span>
   afterTable<span class="token punctuation">:</span> <span class="token keyword">null</span>
   beforeCreate<span class="token punctuation">:</span> <span class="token keyword">null</span>
   afterCreate<span class="token punctuation">:</span> <span class="token keyword">null</span>
   <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token keyword">null</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 columnEditModal<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   pickedFields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   data<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 tableEdit<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   currentRowIndex<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span> <span class="token comment">// 当前编辑的table cell对应的行索引</span>
   currentSchema： undefined <span class="token comment">// 当前编辑的table cell对应的schema</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>key</th><th>type</th><th>default</th><th>desc</th></tr></thead><tbody><tr><td>config</td><td><code>Object</code></td><td>null</td><td><a href="#resourcedeclareobject">resourceDeclareObject</a> 和 <a href="#viewdeclareobject">viewDeclareObject</a> 合并之后的对象</td></tr><tr><td>query</td><td><code>Object</code></td><td>{}</td><td>查询表单的输入值</td></tr><tr><td>create</td><td><code>Object</code></td><td>{}</td><td>创建/编辑 表单的输入值</td></tr><tr><td>$queryForm</td><td><code>Object</code></td><td>null</td><td>查询表单的 $ref</td></tr><tr><td>$createForm</td><td><code>Object</code></td><td>null</td><td>创建/编辑表单的 $ref</td></tr><tr><td>$table</td><td><code>Object</code></td><td>null</td><td>表格的 $ref</td></tr><tr><td>pagination</td><td><code>Object</code></td><td>null</td><td>页面选择器的当前页 pageno，和一页显示条数 count</td></tr><tr><td>slots</td><td><code>Object</code></td><td><a href="#viewdeclareobject-options-slots">viewDeclareObject/options/slots</a> 中函数返回值为初始值</td><td>各个 slot 的 template</td></tr><tr><td>columnEditModal</td><td><code>Object</code></td><td><a href="#store-columneditmodal">默认值详见</a></td><td>当 <a href="#viewdeclareobject-options">options</a> 中启用列编辑功能时，存储列编辑信息</td></tr><tr><td>tableEdit</td><td><code>Object</code></td><td>{}</td><td>当 mode 为 EDIT_IN_CELL 时可用</td></tr></tbody></table><h3 id="store-columneditmodal"><a href="#store-columneditmodal" aria-hidden="true" class="header-anchor">#</a> Store/columnEditModal</h3><p>包含两个数组：</p><ul><li><p>pickedFields: 所有选中列的 key，默认为所有显示在 table 中 schema 的 key。</p></li><li><p>data: 用于生成选择列表的数据，默认是根据显示在 table 中 schema 得到的：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 每个 schema 会被转换成下面的对象</span>
<span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> schema<span class="token punctuation">.</span>key<span class="token punctuation">,</span>
  label<span class="token punctuation">:</span> schema<span class="token punctuation">.</span>label<span class="token punctuation">,</span>
  visible<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><h2 id="route"><a href="#route" aria-hidden="true" class="header-anchor">#</a> Route</h2><p>路由在 Acribus 中扮演组合视图的角色。了解 Acribus 注册路由的规则，可以使用路由来触达任何一个视图组合状态。</p><p>调用 <a href="#register">register</a> 时会想 vue-router 中加入一条路由规则：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resourceName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/:action?/:subView?/:subAction?`</span></span><span class="token punctuation">,</span>
  component<span class="token punctuation">,</span>
  meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> resourceName
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>(String) resourceName: <a href="#viewdeclareobject">viewDeclareObject</a> 中的资源名，所有视图注册后的访问路径时视图中的资源名。</li><li>(String) action: 可选，默认是 'list'。'list', 'add', 'edit', 'detail' 之一，决定哪个视图。</li><li>(String) subView: 视图中资源名。会以弹窗打开该视图。</li><li>(String) subAction: 可选，默认是 'list'。'list', 'add', 'edit', 'detail' 之一，决定哪个视图。</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在 person 的 list 页，以弹窗的形式打开 log 的 add 页面。</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">'person/list/log/add'</span>
  query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="built-in-components"><a href="#built-in-components" aria-hidden="true" class="header-anchor">#</a> Built-In Components</h2><ul><li>aQueryForm</li><li>aCustomHooks</li><li>aCreateForm</li><li>aTable</li></ul><p>当 Acribus 生成的视图布局不能满足需求时，可以回退到组件，并且通过上面的组件充分利用 Acribus 提供的便利。</p><ul><li>aBreadcrumb</li><li>aHeader</li><li>aMenu</li><li>ATabs</li></ul><p>上面这些组件只是对 element-ui 的补充，以便快速搭出完整的后台页面。</p><h3 id="aqueryform"><a href="#aqueryform" aria-hidden="true" class="header-anchor">#</a> aQueryForm</h3><p>Acribus 中查询表单即是该组件生成。</p><ul><li><p>Props:</p><ul><li>view - <code>String</code> 已注册视图中的资源名</li><li>reset - <code>Function</code> 点击 reset 按钮回调，函数的 this 指向 <a href="#context">context</a></li><li>search - <code>Function</code> 点击 search 按钮回调, 函数的接收的参数：
<ul><li>(Object) params: search 携带的参数</li><li>(Object) event: 点击事件</li></ul></li></ul></li><li><p>Usage:
当仅需要已注册视图的查询表单时，可以这样使用：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-query-form</span>
  <span class="token attr-name">view</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:search</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul><h3 id="acustomhooks"><a href="#acustomhooks" aria-hidden="true" class="header-anchor">#</a> aCustomHooks</h3><ul><li><p>Props:</p><ul><li>view - <code>String</code> 已注册视图中的资源名</li><li>show-if: <code>Array</code> 声明仅显示哪些 btn，内容是待显示 btn 的 label</li></ul></li><li><p>Usage:
当仅需要已注册视图的自定义 button 时，可以这样使用：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-custom-hooks</span>
  <span class="token attr-name">view</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>当仅需要展示 upload button 时：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-custom-hooks</span>
  <span class="token attr-name">view</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:show-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>upload<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>默认会显示 create button，如果要隐藏，可以在 <a href="#viewdeclareobject-options">options</a> 中设置。</p></div><h3 id="acreateform"><a href="#acreateform" aria-hidden="true" class="header-anchor">#</a> aCreateForm</h3><ul><li><p>Props:</p><ul><li>view - <code>String</code> 已注册视图中的资源名</li><li>action - <code>String</code> add/edit/detail 之一，标识是 创建/编辑/查看 表单，默认是 add</li><li>cancel: <code>Function</code> 点击取消按钮的回调，函数的 this 指向 <a href="#context">context</a>，如果cancel函数显式返回false，则会拦截默认的cancel行为，只执行自定义的cancel函数，否则先执行自定义的cancel函数，再执行默认的cancel跳转。</li><li>confirm: <code>Function</code>，点击确认按钮的回调，如果confirm函数显式返回false，则会拦截默认的confirm行为，只进行必填验证和执行自定义的confirm函数，否则先执行自定义的confirm函数，再执行默认的confirm。函数的参数：
<ul><li>(Object) data: 表单输入值</li><li>(Object) event: 点击事件</li></ul></li><li>show-if: <code>Array</code> 声明仅显示哪些 schema，内容是待显示 schema 的 key</li></ul></li><li><p>Usage:
当仅需要已注册视图的自定义 button 时，可以这样使用：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-create-form</span>
  <span class="token attr-name">view</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:confirm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>confirm<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>当仅需要展示可编辑 schema 中的 <code>id</code> 和 <code>name</code> 时：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-create-form</span>
  <span class="token attr-name">view</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:show-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>id<span class="token punctuation">'</span>, <span class="token punctuation">'</span>name<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul><h3 id="atable"><a href="#atable" aria-hidden="true" class="header-anchor">#</a> aTable</h3><ul><li><p>Props:</p><ul><li>view - <code>String</code> 已注册视图中的资源名</li><li>confirm - <code>Function</code> 确认更新时调用，只在 mode 为 EDIT_IN_TABLE 时可用，详见 <a href="#constant">constant</a></li></ul></li><li><p>Usage:
当仅需要已注册视图的自定义 table 时，可以这样使用：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-table</span> <span class="token attr-name">view</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul><h3 id="amenu"><a href="#amenu" aria-hidden="true" class="header-anchor">#</a> aMenu</h3><ul><li>Props:
<ul><li>data - <code>Array</code> 渲染菜单的数据，每个节点对象必须包含以下字段：
<ul><li>(String|Number) id: 用作索引，要保证唯一</li><li>(String) fa-icon: icon 名</li><li>(String) title: 节点名</li><li>(Array) children: 如果有子节点，放在 children 下。</li></ul></li><li>change - <code>Function</code> 当路由变化时的回调，以字符串的形式返回匹配节点的 id，函数参数：
<ul><li>(Array) data：传入的 props.data</li><li>(String) path: 取的 <code>this.$route.path</code></li></ul></li></ul></li></ul><p>tip: 默认的 change 函数的匹配规则为</p><div class="language-js extra-class"><pre class="language-js"><code>item<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
</code></pre></div><ul><li><p>Usage:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> <span class="token string">'Lists'</span><span class="token punctuation">,</span>
    <span class="token string">'fa-icon'</span><span class="token punctuation">:</span> <span class="token string">'fa-folder'</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">121</span><span class="token punctuation">,</span>
        title<span class="token punctuation">:</span> <span class="token string">'Normal View'</span><span class="token punctuation">,</span>
        url<span class="token punctuation">:</span> <span class="token string">'/#/role'</span><span class="token punctuation">,</span>
        perm_id<span class="token punctuation">:</span> <span class="token string">'lists.normal'</span><span class="token punctuation">,</span>
        <span class="token string">'fa-icon'</span><span class="token punctuation">:</span> <span class="token string">'fa-file'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">122</span><span class="token punctuation">,</span>
        title<span class="token punctuation">:</span> <span class="token string">'Nested View'</span><span class="token punctuation">,</span>
        url<span class="token punctuation">:</span> <span class="token string">'/#/user'</span><span class="token punctuation">,</span>
        perm_id<span class="token punctuation">:</span> <span class="token string">'lists.nested'</span><span class="token punctuation">,</span>
        <span class="token string">'fa-icon'</span><span class="token punctuation">:</span> <span class="token string">'fa-file'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
        title<span class="token punctuation">:</span> <span class="token string">'Parallel View'</span><span class="token punctuation">,</span>
        url<span class="token punctuation">:</span> <span class="token string">'/#/item'</span><span class="token punctuation">,</span>
        perm_id<span class="token punctuation">:</span> <span class="token string">'lists.parallel'</span><span class="token punctuation">,</span>
        <span class="token string">'fa-icon'</span><span class="token punctuation">:</span> <span class="token string">'fa-file'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-menu</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sp-left-side<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>menuData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-menu</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul><h3 id="abreadcrumb"><a href="#abreadcrumb" aria-hidden="true" class="header-anchor">#</a> aBreadcrumb</h3><ul><li>Props:
<ul><li>data - <code>Array</code> 渲染 <a href="#amenu">Menu</a> 的数据。</li><li>change - <code>Function</code> 当路由变化时的回调，以数组的形式返回所有匹配节点的 title。
<ul><li>(Array) data：传入的 props.data</li><li>(String) path: 取的 <code>this.$route.path</code></li></ul></li></ul></li></ul><p>tip: 默认 change 的匹配规则为：</p><div class="language-js extra-class"><pre class="language-js"><code>item<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span>title<span class="token punctuation">]</span>
</code></pre></div><h3 id="atabs"><a href="#atabs" aria-hidden="true" class="header-anchor">#</a> ATabs</h3><ul><li><p>Props</p><ul><li>(Array) tabs: 生成 tabs 的数组，数组元素需包含以下两个字段：
<ul><li>(String) label: tab 名</li><li>(String) url: 点击 tab 跳转的 url</li></ul></li></ul></li><li><p>Usage:
当仅需要已注册视图的自定义 table 时，可以这样使用：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tabs <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    label<span class="token punctuation">:</span> <span class="token string">'tabs1'</span><span class="token punctuation">,</span>
    url<span class="token punctuation">:</span> <span class="token string">'/person/add'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-tabs</span> <span class="token attr-name">tabs</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tabs<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul><h3 id="aheader"><a href="#aheader" aria-hidden="true" class="header-anchor">#</a> aHeader</h3><ul><li><p>Props</p><ul><li><p>(Object) user: 显示用户信息，至少包含 email 字段。</p></li><li><p>(Object) locales: 显示语言选择器。接受如下结构的对象：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">'en'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    _name<span class="token punctuation">:</span> <span class="token string">'English'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'zh-CN'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    _name<span class="token punctuation">:</span> <span class="token string">'简体中文'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'zh-TW'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    _name<span class="token punctuation">:</span> <span class="token string">'繁體中文'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>(Function) logout: 点击登出按钮的回调</p></li></ul></li><li><p>Slot</p><ul><li>default 头部插入自定义内容</li><li>logo 接受命名 slot: logo, 在 header 中放置自定义 logo</li></ul></li><li><p>Event</p><ul><li>localeChange: 语言切换是发出，携带当前选择语言为参数。</li></ul></li><li><p>Usage:</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-header</span> <span class="token attr-name">:user</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentLoginUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:locales</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>locales<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:logout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>logout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@localeChange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>localeChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sp-logo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>logo-icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-header</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul><h2 id="refs"><a href="#refs" aria-hidden="true" class="header-anchor">#</a> Refs</h2><h3 id="options"><a href="#options" aria-hidden="true" class="header-anchor">#</a> options</h3><p>option 可接受配置完整列表</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token comment">// Component props</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'hi'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// normal HTML attributes</span>
    attrs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">'foo'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// DOM props</span>
    domProps<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      innerHTML<span class="token punctuation">:</span> <span class="token string">'bar'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Event handlers are nested under &quot;on&quot;, though</span>
    <span class="token comment">// modifiers such as in v-on:keyup.enter are not</span>
    <span class="token comment">// supported. You'll have to manually check the</span>
    <span class="token comment">// keyCode in the handler instead.</span>
    on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// For components only. Allows you to listen to</span>
    <span class="token comment">// native events, rather than events emitted from</span>
    <span class="token comment">// the component using vm.$emit.</span>
    nativeOn<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      click<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nativeClickHandler
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// class is a special module, same API as `v-bind:class`</span>
    <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      foo<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      bar<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// style is also same as `v-bind:style`</span>
    style<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
      fontSize<span class="token punctuation">:</span> <span class="token string">'14px'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// other special top-level properties</span>
    key<span class="token punctuation">:</span> <span class="token string">'key'</span><span class="token punctuation">,</span>
    ref<span class="token punctuation">:</span> <span class="token string">'ref'</span><span class="token punctuation">,</span>
    <span class="token comment">// assign the `ref` is used on elements/components with v-for</span>
    refInFor<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    slot<span class="token punctuation">:</span> <span class="token string">'slot'</span>
  <span class="token punctuation">}</span>
</code></pre></div></div><div class="content edit-link"><a href="https://github.com/acribus/acribus/edit/master/docs/zh/api/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!----></div><!----></div></div></div>
    <script src="/acribus/assets/js/app.38103787.js" defer></script><script src="/acribus/assets/js/12.08257d0a.js" defer></script>
  </body>
</html>
