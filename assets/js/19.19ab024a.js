(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{195:function(t,s,e){"use strict";e.r(s);var r=e(0),a=Object(r.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),e("p",[t._v("Acribus 中默认行为的修改放在 "),e("a",{attrs:{href:"https://acribus.github.io/acribus/zh/api/#viewdeclareobject-options-interceptors",target:"_blank",rel:"noopener noreferrer"}},[t._v("options/interceptors"),e("OutboundLink")],1),t._v(" 中。")]),e("p",[t._v("包含下面几个行为:")]),t._m(4),t._m(5),e("p",[t._v("在 Acribus 中，store 是视图的唯一映射，这使得对视图变化（store 的改变）的观测变得很容易：\n只需要"),e("a",{attrs:{href:"https://vuex.vuejs.org/zh/api/#subscribe",target:"_blank",rel:"noopener noreferrer"}},[t._v("订阅 store 的 mutation 或者 action"),e("OutboundLink")],1),t._v(" 即可。注意这种订阅是全局的，在整个应用中只能被执行一次。如果放在组件实例化中，要在组件销毁的时候取消订阅。")]),e("p",[t._v("Acribus options/subscribe 很适合放置这种订阅。")]),e("p",[t._v("Acribus 中可以订阅的 mutation 和 action 见下面的 Refs")]),t._m(6),e("p",[t._v("所有的执行时机可控，是目标。\nAcribus 每个行为都有默认的执行时机，比如 search 发生在用户点击 search 按钮后，更新发生在用户输入框值改变（表格内编辑模式）。")]),e("p",[t._v("建议这样对执行时机进行控制：直接终止默认行为的执行（所有行为可被重载：interceptors）\n然后订阅合适的时机，执行自定义行为")]),t._m(7),t._m(8),e("p",[t._v("每个资源的每个 RESOURCE_ACTION_TYPE 都有下面三个 mutation：")]),t._m(9),t._m(10),e("p",[t._v("eg:")]),e("p",[t._v("person/listStart 会在 person 资源开始发起 search 时触发")]),e("ul",[e("li",[t._v("可以订阅的 action 参见"),e("a",{attrs:{href:"https://acribus.github.io/acribus/zh/api/#store",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于 store 的介绍"),e("OutboundLink")],1)])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#教程","aria-hidden":"true"}},[this._v("#")]),this._v(" 教程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"acribus-设计原则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#acribus-设计原则","aria-hidden":"true"}},[this._v("#")]),this._v(" Acribus 设计原则")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("所有行为可被重载")]),s("li",[this._v("所有执行时机可控")]),s("li",[this._v("所有执行进度可被感知")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"所有行为可被重载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所有行为可被重载","aria-hidden":"true"}},[this._v("#")]),this._v(" 所有行为可被重载")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("默认导航行为的重置: beforeEnter\n可以在这里决定是否终止导航")])]),s("li",[s("p",[this._v("拉取资源详情时：one\n可以在这里修改请求参数，或是终止请求")])]),s("li",[s("p",[this._v("拉取资源列表时：search\n可以在这里修改请求参数，或是终止请求")])]),s("li",[s("p",[this._v("创建一条资源记录时：create\n可以在这里修改请求参数，或是终止请求")])]),s("li",[s("p",[this._v("更新一条资源记录时：update\n可以在这里修改请求参数，或是终止请求")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"所有执行进度可被感知"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所有执行进度可被感知","aria-hidden":"true"}},[this._v("#")]),this._v(" 所有执行进度可被感知")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"所有执行时机可控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所有执行时机可控","aria-hidden":"true"}},[this._v("#")]),this._v(" 所有执行时机可控")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"refs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#refs","aria-hidden":"true"}},[this._v("#")]),this._v(" Refs")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("可以订阅的 mutation：")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RESOURCE_ACTION_TYPE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LIST")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'list'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ONE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'one'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ADD")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UPDATE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'update'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'delete'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("code",[this._v("${resourceName}/${RESOURCE_ACTION_TYPE}Start")]),this._v(": 开始发起请求")]),s("li",[s("code",[this._v("${resourceName}/${RESOURCE_ACTION_TYPE}Success")]),this._v(": 请求成功返回")]),s("li",[s("code",[this._v("${resourceName}/${RESOURCE_ACTION_TYPE}Error")]),this._v(": 请求失败")])])}],!1,null,null,null);s.default=a.exports}}]);